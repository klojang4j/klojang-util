<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UnmodifiableIntList.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Klojang Util</a> &gt; <a href="index.source.html" class="el_package">org.klojang.util.collection</a> &gt; <span class="el_source">UnmodifiableIntList.java</span></div><h1>UnmodifiableIntList.java</h1><pre class="source lang-java linenums">package org.klojang.util.collection;

import java.util.Arrays;
import java.util.Collection;
import java.util.List;
import java.util.OptionalInt;
import java.util.function.IntConsumer;
import java.util.stream.IntStream;

import org.klojang.check.Check;
import org.klojang.check.fallible.FallibleIntConsumer;
import org.klojang.util.ArrayMethods;
import org.klojang.util.collection.IntArrayList;
import org.klojang.util.collection.IntList;
import org.klojang.util.collection.UnmodifiableIntList;

import static java.lang.System.arraycopy;
import static org.klojang.check.CommonChecks.gte;
import static org.klojang.check.CommonChecks.lt;
import static org.klojang.util.ArrayMethods.*;

final class UnmodifiableIntList implements IntList {

  final int[] buf;

<span class="fc" id="L26">  UnmodifiableIntList(int[] buf) {</span>
<span class="fc" id="L27">    this.buf = buf;</span>
<span class="fc" id="L28">  }</span>

  @Override
  public int get(int index) {
<span class="fc" id="L32">    Check.on(ArrayIndexOutOfBoundsException::new, index)</span>
<span class="fc" id="L33">        .is(gte(), 0)</span>
<span class="fc" id="L34">        .is(lt(), buf.length);</span>
<span class="fc" id="L35">    return buf[index];</span>
  }

  @Override
  public void set(int index, int value) {
<span class="fc" id="L40">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public OptionalInt indexOf(int value) {
<span class="fc" id="L45">    return ArrayMethods.indexOf(buf, value);</span>
  }

  @Override
  public OptionalInt lastIndexOf(int value) {
<span class="fc" id="L50">    return ArrayMethods.lastIndexOf(buf, value);</span>
  }

  @Override
  public void add(int value) {
<span class="fc" id="L55">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public void add(int index, int value) {
<span class="fc" id="L60">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public void addAll(IntList other) {
<span class="fc" id="L65">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public void addAll(int[] values) {
<span class="fc" id="L70">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public void addAll(int index, IntList other) {
<span class="fc" id="L75">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public void addAll(int index, int[] values) {
<span class="fc" id="L80">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public void removeByIndex(int index) {
<span class="fc" id="L85">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public boolean removeByValue(int value) {
<span class="fc" id="L90">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public boolean removeAll(IntList list) {
<span class="fc" id="L95">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public boolean removeAll(int... values) {
<span class="fc" id="L100">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public boolean removeAll(Collection&lt;?&gt; c) {
<span class="fc" id="L105">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public boolean retainAll(IntList list) {
<span class="fc" id="L110">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public boolean retainAll(int... values) {
<span class="fc" id="L115">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public boolean retainAll(Collection&lt;?&gt; c) {
<span class="fc" id="L120">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public int size() {
<span class="fc" id="L125">    return buf.length;</span>
  }

  @Override
  public boolean isEmpty() {
<span class="fc bfc" id="L130" title="All 2 branches covered.">    return buf.length == 0;</span>
  }

  @Override
  public void clear() {
<span class="fc" id="L135">    throw new UnsupportedOperationException();</span>

  }

  @Override
  public void trim(int newSize) {
<span class="fc" id="L141">    throw new UnsupportedOperationException();</span>

  }

  @Override
  public int capacity() {
<span class="fc" id="L147">    return buf.length;</span>
  }

  @Override
  public void setCapacity(int newCapacity) {
<span class="fc" id="L152">    throw new UnsupportedOperationException();</span>

  }

  @Override
  public void sort() {
<span class="fc" id="L158">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public void sortDescending() {
<span class="fc" id="L163">    throw new UnsupportedOperationException();</span>
  }

  @Override
  public int[] toArray() {
<span class="fc" id="L168">    int[] b = new int[buf.length];</span>
<span class="fc" id="L169">    System.arraycopy(buf, 0, b, 0, buf.length);</span>
<span class="fc" id="L170">    return b;</span>
  }

  @Override
  public int[] toArray(int from, int to) {
<span class="fc" id="L175">    int size = buf.length;</span>
<span class="fc" id="L176">    int len = Check.fromTo(size, from, to);</span>
<span class="pc bpc" id="L177" title="1 of 2 branches missed.">    if ((size | len) == 0) {</span>
<span class="nc" id="L178">      return EMPTY_INT_ARRAY;</span>
    }
<span class="fc" id="L180">    int[] b = new int[len];</span>
<span class="fc" id="L181">    arraycopy(buf, 0, b, 0, len);</span>
<span class="fc" id="L182">    return b;</span>
  }

  public List&lt;Integer&gt; toGenericList() {
<span class="fc" id="L186">    return List.of(ArrayMethods.box(buf));</span>
  }

  @Override
  public IntStream stream() {
<span class="fc" id="L191">    return Arrays.stream(buf, 0, buf.length);</span>
  }

  @Override
  public void forEach(IntConsumer action) {
<span class="fc" id="L196">    stream().forEach(Check.notNull(action).ok());</span>
<span class="fc" id="L197">  }</span>

  @Override
  public &lt;E extends Throwable&gt; void forEachThrowing(FallibleIntConsumer&lt;E&gt; action)
      throws E {
<span class="fc bfc" id="L202" title="All 2 branches covered.">    for (int i : buf) {</span>
<span class="fc" id="L203">      action.accept(i);</span>
    }
<span class="fc" id="L205">  }</span>

  @Override
  public boolean equals(Object obj) {
<span class="fc bfc" id="L209" title="All 2 branches covered.">    if (this == obj) {</span>
<span class="fc" id="L210">      return true;</span>
<span class="fc bfc" id="L211" title="All 2 branches covered.">    } else if (obj instanceof UnmodifiableIntList x) {</span>
<span class="fc" id="L212">      return Arrays.equals(buf, x.buf);</span>
<span class="fc bfc" id="L213" title="All 2 branches covered.">    } else if (obj instanceof IntArrayList y) {</span>
<span class="fc bfc" id="L214" title="All 4 branches covered.">      return size() == y.size() &amp;&amp; Arrays.equals(buf, 0, size(), y.buf, 0, size());</span>
    }
<span class="fc" id="L216">    return false;</span>
  }

  private Integer hash;
  private String str;

  public int hashCode() {
<span class="fc bfc" id="L223" title="All 2 branches covered.">    if (hash == null) {</span>
<span class="fc" id="L224">      hash = Arrays.hashCode(buf);</span>
    }
<span class="fc" id="L226">    return hash;</span>
  }

  public String toString() {
<span class="fc bfc" id="L230" title="All 2 branches covered.">    if (str == null) {</span>
<span class="fc" id="L231">      str = '[' + implodeInts(buf) + ']';</span>
    }
<span class="fc" id="L233">    return str;</span>
  }

<span class="fc" id="L236">  public static final IntList EMPTY = new UnmodifiableIntList(new int[0]);</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>